package net.augustus.modules.exploit;

import net.augustus.events.EventSendPacket;
import net.augustus.events.EventWorld;
import net.augustus.modules.Categorys;
import net.augustus.modules.Module;
import net.augustus.settings.BooleanValue;
import net.augustus.utils.skid.vestige.LogUtil;
import net.augustus.utils.skid.xylitol.PacketUtil;
import net.lenni0451.eventapi.reflection.EventTarget;
import net.minecraft.entity.player.PlayerCapabilities;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C13PacketPlayerAbilities;
import net.minecraft.network.play.client.C18PacketSpectate;

import java.awt.*;

public class C13C18Dis extends Module {


    public C13C18Dis() {
        super("C13C18Dis", Color.white, Categorys.EXPLOIT);

    }
    public BooleanValue modifyC13 = new BooleanValue(74509,"ModifyC13",this,true);
    public BooleanValue spamC13 = new BooleanValue(74029,"SpamC13",this,true);
    public BooleanValue autoDis = new BooleanValue(7409,"AutoDisable",this,true);
    public BooleanValue disOnWorld = new BooleanValue(6718,"DisableOnWorld",this,true);

    public BooleanValue debug = new BooleanValue(6208,"Debug",this,true);

    public void onEventWorld(EventWorld eventWorld) {
        if (this.disOnWorld.getBoolean()) {
            this.setToggled(false);
        }
    }
    @EventTarget
    public void onEventSendPacket(EventSendPacket eventSendPacket) {
        Packet packet = eventSendPacket.getPacket();
        if (packet instanceof C03PacketPlayer) {
            PacketUtil.send(new C18PacketSpectate(mc.thePlayer.getUniqueID()));
            if (debug.getBoolean()) {
                LogUtil.addDebugChatMessage(this, "Send C18.");
            }
            if (spamC13.getBoolean()) {
                PacketUtil.send(new C13PacketPlayerAbilities(mc.thePlayer.capabilities));
                if (debug.getBoolean()) {
                    LogUtil.addDebugChatMessage(this, "Send C13.");
                }
            }
        }
        if (packet instanceof C13PacketPlayerAbilities) {
            if (modifyC13.getBoolean()) {
                PlayerCapabilities playerCapabilities = new PlayerCapabilities();
                playerCapabilities.isFlying = true;
                playerCapabilities.disableDamage = true;
                playerCapabilities.allowFlying = true;
                playerCapabilities.isCreativeMode = false;
                eventSendPacket.setCancelled(true);
                PacketUtil.sendPacketNoEvent(new C13PacketPlayerAbilities(playerCapabilities));
                if (debug.getBoolean()) {
                    LogUtil.addDebugChatMessage(this, "Modified C13.");
                }
            }
        }
    }



}
